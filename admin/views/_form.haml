-#coding:utf-8
.row
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:first_name)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'שם פרטי', :class => 'control-label'
      .controls
        =f.text_field :first_name, :class => 'input-xlarge input-with-feedback'
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:last_name)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'שם משפחה', :class => 'control-label'
      .controls
        =f.text_field :last_name, :class => 'input-xlarge input-with-feedback'

.row
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:birthday)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'תאריך לידה', :class => 'control-label'
      .controls
        =f.text_field :birthday, :class => 'input-xlarge input-with-feedback datemask'
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:gender)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'מין', :class => 'control-label'
      .controls
        .row
          .col-sm-6.col-6
            %input{:type=>'radio',:name=>'supporter[gender]',:value=>1} &nbsp; זכר &nbsp;
          .col-sm-6.col-6
            %input{:type=>'radio',:name=>'supporter[gender]',:value=>1} &nbsp; נקבה &nbsp;

.row
  .col-sm-12.col-12
    - error = @supporter.errors.include?(:occupation)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'מקצוע', :class => 'control-label'
      .controls
        =f.text_field :occupation, :class => 'input-xlarge input-with-feedback'
    %hr/

.row
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:city)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'עיר', :class => 'control-label'
      .controls
        =f.text_field :city, :class => 'input-xlarge input-with-feedback'

    - error = @supporter.errors.include?(:street_name)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label :street_name, :class => 'control-label'
      .controls
        =f.text_field :street_name, :class => 'input-xlarge input-with-feedback'

    .row
      .col-sm-4.col-4
        - error = @supporter.errors.include?(:num_building)
        %fieldset.control-group{:class => error ? 'has-error' : ''}
          =f.label '#bld', :class => 'control-label'
          .controls
            =f.text_field :num_building, :class => 'input-xlarge input-with-feedback number'
      .col-sm-4.col-4
        - error = @supporter.errors.include?(:num_apartment)
        %fieldset.control-group{:class => error ? 'has-error' : ''}
          =f.label '#apt', :class => 'control-label'
          .controls
            =f.text_field :num_apartment, :class => 'input-xlarge input-with-feedback number'
      .col-sm-4.col-4
        - error = @supporter.errors.include?(:zip_code)
        %fieldset.control-group{:class => error ? 'has-error' : ''}
          =f.label 'מיקוד', :class => 'control-label'
          .controls
            =f.text_field :zip_code, :class => 'input-xlarge input-with-feedback number'
    %hr/

  .col-sm-6.col-6
    - error = @supporter.errors.include?(:home_phone)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'טלפון בבית', :class => 'control-label'
      .controls
        =f.text_field :home_phone, :class => 'input-xlarge input-with-feedback phonemask'
    - error = @supporter.errors.include?(:mobile_phone)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'טלפון נייד', :class => 'control-label'
      .controls
        =f.text_field :mobile_phone, :class => 'input-xlarge input-with-feedback phonemask'
    - error = @supporter.errors.include?(:email)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'אי-מייל', :class => 'control-label'
      .controls
        =f.text_field :email, :class => 'input-xlarge input-with-feedback'
    %hr/

.row
  .col-sm-6.col-6
    - error = @supporter.errors.include?(:receive_updates)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'מעוניין לקבל עדכונים?', :class => 'control-label'
      =f.check_box :receive_updates, :class => 'input-with-feedback'
    %hr/

  .col-sm-6.col-6
    - error = @supporter.errors.include?(:existing)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'תומך קיים?', :class => 'control-label'
      =f.check_box :existing, :class => 'input-with-feedback'
    %hr/

.row
  .col-sm-12.col-12
    -#
      %ul.nav.nav-tabs#dontypes
        %li.active
          %a{:href=>'#monthly'} Monthly
        %li
          %a{:href=>'#oneoff'} One-off

    .tab-content
      .tab-pane.active#monthly
        .row
          -$prices.each do |p|
            .col-3.col-sm-3
              %input{:type=>:radio,:name=>:monthly,:onclick=>'setMonthly('+p.to_s+')'}= ' '+p.to_s+' ILS'
          .col-3.col-sm-3
            %input{:type=>:radio,:name=>:monthly,:onclick=>'resetMonthly()'}= ' Other'
          .col-12.col-sm-12
            - error = @supporter.errors.include?(:ap_monthly)
            %fieldset.control-group{:class => error ? 'has-error' : ''}
              -#=f.label :ap_monthly, :class => 'control-label'
              .controls
                =f.text_field :ap_monthly, :class => 'input-xlarge input-with-feedback'
        :javascript
          function resetMonthly() {
            $('#supporter_ap_monthly').val('');
            $('#supporter_ap_monthly').focus();
          }
          function setMonthly(x) {
            $('#supporter_ap_monthly').val(x)
          }
    -#
      .tab-pane#oneoff
        .row
          -$prices.each do |p|
            .col-3.col-sm-3
              %input{:type=>:radio,:name=>:monthly,:onclick=>'setOneoff('+(p*5).to_s+')'}= ' '+(p*5).to_s+' ILS'
          .col-3.col-sm-3
            %input{:type=>:radio,:name=>:monthly,:onclick=>'resetOneoff()'}= ' Other'
          .col-12.col-sm-12
            - error = @supporter.errors.include?(:ap_one_off)
            %fieldset.control-group{:class => error ? 'has-error' : ''}
              -#=f.label :ap_one_off, :class => 'control-label'
              .controls
                =f.text_field :ap_one_off, :class => 'input-xlarge input-with-feedback'
        :javascript
          function resetOneoff() {
            $('#supporter_ap_one_off').val('');
            $('#supporter_ap_one_off').focus();
          }
          function setOneoff(x) {
            $('#supporter_ap_one_off').val(x)
          }
-#
  :javascript
    $('#dontypes a').click(function (e) {
      e.preventDefault();
      $(this).tab('show');
      $.each($('.tab-pane input'),function(i,v){
        $(v).val('');
      });
    })

.row
  .col-sm-12.col-12
    - error = @supporter.errors.include?(:notes)
    %fieldset.control-group{:class => error ? 'has-error' : ''}
      =f.label 'הערות', :class => 'control-label'
      .controls
        ~f.text_area :notes, :class => 'input-xlarge input-with-feedback', :rows=>4, :style=>'max-width:100%;'
    %hr/

.row
  .col-sm-12.col-12
    .form-actions
      =f.submit pat(:submit), :class => 'btn btn-success input-xlarge', :style => 'height: 72px; padding:24px 0;'

:javascript
  $(document).ready(function(){
    $(".datemask").mask("99/99/9999");
    $('.datemask').attr('placeholder','__/__/____');
    $('.datemask').css('direction','ltr');
    $(".phonemask").mask("999 999 9999");
    $('.phonemask').attr('placeholder','___ ___ ____');
    $('.phonemask').css('direction','ltr');
    $('.number').css('direction','ltr');
  });
